<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuickBite - Food Delivery Service</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Work+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Work Sans', sans-serif; }
    .title-font { font-family: 'Bebas Neue', sans-serif; letter-spacing: 0.05em; }
    .brutalist-card { border: 3px solid #fff; box-shadow: 8px 8px 0 #ff6b35; transition: all 0.2s ease; }
    .brutalist-card:hover { transform: translate(-4px, -4px); box-shadow: 12px 12px 0 #ff6b35; }
    .accent-shadow { box-shadow: 4px 4px 0 #00d9ff; }
    .btn-primary { background: #ff6b35; border: 3px solid #fff; box-shadow: 4px 4px 0 #fff; transition: all 0.15s ease; cursor: pointer; }
    .btn-primary:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0 #fff; }
    .btn-primary:active { transform: translate(1px, 1px); box-shadow: 2px 2px 0 #fff; }
    @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    .animate-slide-up { animation: slideUp 0.4s ease-out forwards; }
    .grid-pattern {
      background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
      background-size: 30px 30px;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useCallback } = React;
    const API_URL = 'http://localhost:3001/api';

    const MOCK_RESTAURANTS = [
      { id: 1, name: "Sakura Sushi",    cuisine: "Japanese", rating: 4.8, deliveryTime: "25-35 min", deliveryFee: 2.99, image: "üç£" },
      { id: 2, name: "Mama's Pizzeria", cuisine: "Italian",  rating: 4.6, deliveryTime: "30-40 min", deliveryFee: 1.99, image: "üçï" },
      { id: 3, name: "Taco Fiesta",     cuisine: "Mexican",  rating: 4.7, deliveryTime: "20-30 min", deliveryFee: 2.49, image: "üåÆ" },
      { id: 4, name: "Green Bowl",      cuisine: "Healthy",  rating: 4.9, deliveryTime: "15-25 min", deliveryFee: 3.49, image: "ü•ó" },
      { id: 5, name: "Burger Palace",   cuisine: "American", rating: 4.5, deliveryTime: "25-35 min", deliveryFee: 2.99, image: "üçî" },
      { id: 6, name: "Spice Route",     cuisine: "Indian",   rating: 4.8, deliveryTime: "35-45 min", deliveryFee: 2.49, image: "üçõ" },
    ];

    const MOCK_MENUS = {
      1: [
        { id: 101, name: "California Roll",  price: 12.99, description: "Crab, avocado, cucumber",        category: "Rolls"  },
        { id: 102, name: "Spicy Tuna Roll",  price: 14.99, description: "Tuna, spicy mayo, cucumber",     category: "Rolls"  },
        { id: 103, name: "Salmon Nigiri",    price:  8.99, description: "2 pieces of fresh salmon",       category: "Nigiri" },
        { id: 104, name: "Miso Soup",        price:  3.99, description: "Traditional soybean soup",       category: "Sides"  },
        { id: 105, name: "Edamame",          price:  5.99, description: "Steamed soybeans with sea salt", category: "Sides"  },
      ],
      2: [
        { id: 201, name: "Margherita Pizza", price: 13.99, description: "Tomato sauce, mozzarella, basil", category: "Pizza"    },
        { id: 202, name: "Pepperoni Pizza",  price: 15.99, description: "Classic pepperoni & cheese",      category: "Pizza"    },
        { id: 203, name: "Caesar Salad",     price:  8.99, description: "Romaine, parmesan, croutons",     category: "Salads"   },
        { id: 204, name: "Garlic Bread",     price:  5.99, description: "Toasted with garlic butter",      category: "Sides"    },
        { id: 205, name: "Tiramisu",         price:  6.99, description: "Classic Italian dessert",         category: "Desserts" },
      ],
      3: [
        { id: 301, name: "Carne Asada Tacos", price: 11.99, description: "3 tacos with grilled beef",  category: "Tacos"       },
        { id: 302, name: "Chicken Burrito",   price: 10.99, description: "Rice, beans, cheese, chicken", category: "Burritos"  },
        { id: 303, name: "Guacamole & Chips", price:  7.99, description: "Fresh avocado dip",           category: "Appetizers" },
        { id: 304, name: "Quesadilla",        price:  9.99, description: "Cheese & chicken",            category: "Quesadillas"},
        { id: 305, name: "Churros",           price:  5.99, description: "Cinnamon sugar churros",      category: "Desserts"   },
      ],
      4: [
        { id: 401, name: "Buddha Bowl",    price: 13.99, description: "Quinoa, avocado, greens, tahini",    category: "Bowls"     },
        { id: 402, name: "Acai Bowl",      price: 11.99, description: "Acai, granola, fresh berries",       category: "Bowls"     },
        { id: 403, name: "Green Smoothie", price:  7.99, description: "Spinach, banana, mango, almond milk",category: "Drinks"    },
        { id: 404, name: "Avocado Toast",  price:  9.99, description: "Sourdough, avocado, cherry tomatoes",category: "Breakfast" },
        { id: 405, name: "Chia Pudding",   price:  6.99, description: "Coconut milk, chia seeds, berries",  category: "Desserts"  },
      ],
      5: [
        { id: 501, name: "Classic Burger",      price: 11.99, description: "Beef patty, lettuce, tomato, cheese", category: "Burgers" },
        { id: 502, name: "Double Bacon Burger", price: 15.99, description: "Two patties, bacon, cheddar",          category: "Burgers" },
        { id: 503, name: "Sweet Potato Fries",  price:  5.99, description: "Crispy sweet potato fries",            category: "Sides"   },
        { id: 504, name: "Onion Rings",         price:  6.99, description: "Beer-battered onion rings",            category: "Sides"   },
        { id: 505, name: "Milkshake",           price:  5.99, description: "Vanilla, chocolate, or strawberry",    category: "Drinks"  },
      ],
      6: [
        { id: 601, name: "Chicken Tikka Masala", price: 14.99, description: "Creamy tomato curry with chicken",    category: "Curry"      },
        { id: 602, name: "Vegetable Biryani",    price: 12.99, description: "Fragrant rice with mixed vegetables",  category: "Rice"       },
        { id: 603, name: "Samosas",              price:  6.99, description: "Crispy pastries with spiced potatoes", category: "Appetizers" },
        { id: 604, name: "Garlic Naan",          price:  3.99, description: "Freshly baked flatbread",              category: "Bread"      },
        { id: 605, name: "Mango Lassi",          price:  4.99, description: "Sweet yogurt drink",                   category: "Drinks"     },
      ],
    };

    // Icons
    const ShoppingCart = () => (
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
      </svg>
    );
    const SearchIcon = () => (
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
      </svg>
    );
    const Star = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="#00d9ff" stroke="#00d9ff" strokeWidth="2">
        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
      </svg>
    );
    const Clock = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
      </svg>
    );
    const Plus = () => (
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
      </svg>
    );
    const Minus = () => (
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="5" y1="12" x2="19" y2="12"/>
      </svg>
    );
    const X = () => (
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    );
    const CheckCircle = () => (
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#ff6b35" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
    );

    function FoodDeliveryApp() {
      const [view, setView]                         = useState('home');
      const [allRestaurants, setAllRestaurants]     = useState([]);
      const [restaurants, setRestaurants]           = useState([]);
      const [selectedRestaurant, setSelectedRestaurant] = useState(null);
      const [menuData, setMenuData]                 = useState(null);
      const [cart, setCart]                         = useState([]);
      const [searchQuery, setSearchQuery]           = useState('');
      const [orderDetails, setOrderDetails]         = useState(null);
      const [loading, setLoading]                   = useState(false);
      const [backendAvailable, setBackendAvailable] = useState(null);
      const [customerName, setCustomerName]         = useState('');
      const [customerPhone, setCustomerPhone]       = useState('');
      const [deliveryAddress, setDeliveryAddress]   = useState('');

      // On mount: try backend, fall back to mock data
      useEffect(() => {
        (async () => {
          try {
            const res = await fetch(`${API_URL}/restaurants`);
            if (!res.ok) throw new Error();
            const data = await res.json();
            setAllRestaurants(data);
            setRestaurants(data);
            setBackendAvailable(true);
          } catch {
            setAllRestaurants(MOCK_RESTAURANTS);
            setRestaurants(MOCK_RESTAURANTS);
            setBackendAvailable(false);
          }
        })();
      }, []);

      // Search: calls /api/search when backend is up, filters locally otherwise
      const handleSearch = useCallback(async (query) => {
        setSearchQuery(query);
        if (!query.trim()) {
          setRestaurants(allRestaurants);
          return;
        }
        if (backendAvailable) {
          try {
            const res = await fetch(`${API_URL}/search?query=${encodeURIComponent(query)}`);
            if (!res.ok) throw new Error();
            setRestaurants(await res.json());
            return;
          } catch {}
        }
        // Local filter fallback
        const q = query.toLowerCase();
        setRestaurants(allRestaurants.filter(r =>
          r.name.toLowerCase().includes(q) || r.cuisine.toLowerCase().includes(q)
        ));
      }, [backendAvailable, allRestaurants]);

      const loadMenu = async (restaurantId) => {
        setLoading(true);
        try {
          if (backendAvailable) {
            const res = await fetch(`${API_URL}/restaurants/${restaurantId}/menu`);
            const data = await res.json();
            setSelectedRestaurant(data.restaurant);
            setMenuData(data.menu);
          } else {
            setSelectedRestaurant(MOCK_RESTAURANTS.find(r => r.id === restaurantId));
            setMenuData(MOCK_MENUS[restaurantId] || []);
          }
          setView('menu');
        } catch (e) { console.error(e); }
        finally { setLoading(false); }
      };

      const addToCart = (item) => setCart(prev => {
        const ex = prev.find(c => c.id === item.id);
        return ex ? prev.map(c => c.id === item.id ? { ...c, quantity: c.quantity + 1 } : c)
                  : [...prev, { ...item, quantity: 1 }];
      });

      const removeFromCart = (itemId) => setCart(prev => {
        const ex = prev.find(c => c.id === itemId);
        return ex && ex.quantity > 1
          ? prev.map(c => c.id === itemId ? { ...c, quantity: c.quantity - 1 } : c)
          : prev.filter(c => c.id !== itemId);
      });

      const subtotal        = () => cart.reduce((s, i) => s + i.price * i.quantity, 0);
      const total           = () => subtotal() + (selectedRestaurant?.deliveryFee || 0);
      const cartItemCount   = cart.reduce((s, i) => s + i.quantity, 0);

      const placeOrder = async () => {
        if (!customerName || !customerPhone || !deliveryAddress) { alert('Please fill in all delivery details'); return; }
        setLoading(true);
        const payload = { restaurantId: selectedRestaurant.id, items: cart, deliveryAddress, customerName, customerPhone,
          subtotal: subtotal(), deliveryFee: selectedRestaurant.deliveryFee, total: total() };
        try {
          if (backendAvailable) {
            const res = await fetch(`${API_URL}/orders`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            setOrderDetails(await res.json());
          } else {
            setOrderDetails({ ...payload, id: Math.floor(Math.random() * 9000) + 1000, status: 'confirmed',
              createdAt: new Date().toISOString(), estimatedDelivery: new Date(Date.now() + 30 * 60000).toISOString() });
          }
          setCart([]);
          setView('confirmation');
        } catch { alert('Failed to place order. Please try again.'); }
        finally { setLoading(false); }
      };

      const groupedMenu = (menuData || []).reduce((acc, item) => {
        (acc[item.category] = acc[item.category] || []).push(item); return acc;
      }, {});

      const goHome = () => { setView('home'); setSearchQuery(''); setRestaurants(allRestaurants); };

      return (
        <div className="min-h-screen bg-[#0a0a0a] text-white">

          {/* Header */}
          <header className="bg-black border-b-4 border-white sticky top-0 z-50">
            <div className="max-w-7xl mx-auto px-6 py-5 flex justify-between items-center">
              <h1 className="title-font text-5xl cursor-pointer" onClick={goHome}>QUICKBITE</h1>
              <div className="flex items-center gap-4">
                {backendAvailable === false && (
                  <span className="text-xs text-yellow-400 border border-yellow-400 px-2 py-1 font-bold">DEMO MODE</span>
                )}
                <button onClick={() => setView('cart')}
                  className="relative bg-[#ff6b35] text-white px-6 py-3 font-bold text-lg border-2 border-white accent-shadow hover:translate-x-[-2px] hover:translate-y-[-2px] transition-transform flex items-center gap-2">
                  <ShoppingCart /> CART
                  {cartItemCount > 0 && (
                    <span className="absolute -top-2 -right-2 bg-[#00d9ff] text-black w-7 h-7 rounded-full flex items-center justify-center font-bold text-sm border-2 border-white">
                      {cartItemCount}
                    </span>
                  )}
                </button>
              </div>
            </div>
          </header>

          <div className="grid-pattern min-h-screen">

            {/* HOME */}
            {view === 'home' && (
              <div className="max-w-7xl mx-auto px-6 py-12 animate-slide-up">
                <div className="text-center mb-16">
                  <h2 className="title-font text-8xl mb-4">FOOD <span className="text-[#ff6b35]">DELIVERED</span></h2>
                  <p className="text-2xl text-gray-400 mb-8">Order from the best restaurants in your city</p>
                  <div className="max-w-2xl mx-auto relative">
                    <input type="text" placeholder="Search restaurants or cuisines..." value={searchQuery}
                      onChange={e => handleSearch(e.target.value)}
                      className="w-full px-6 py-5 text-xl bg-[#1a1a1a] border-2 border-white text-white placeholder-gray-500 accent-shadow focus:outline-none focus:border-[#00d9ff]" />
                    <div className="absolute right-6 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"><SearchIcon /></div>
                  </div>
                </div>

                {loading ? (
                  <div className="text-center py-20 text-3xl text-gray-500">Loading...</div>
                ) : restaurants.length === 0 ? (
                  <div className="text-center py-20">
                    <p className="text-3xl text-gray-500 mb-6">No restaurants found for "{searchQuery}"</p>
                    <button onClick={() => handleSearch('')} className="btn-primary text-white px-8 py-4 font-bold text-xl">CLEAR SEARCH</button>
                  </div>
                ) : (
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {restaurants.map((r, i) => (
                      <div key={r.id} className="brutalist-card bg-[#1a1a1a] p-6 cursor-pointer animate-slide-up"
                        style={{ animationDelay: `${i * 0.07}s` }} onClick={() => loadMenu(r.id)}>
                        <div className="text-6xl mb-4">{r.image}</div>
                        <h3 className="title-font text-3xl mb-2">{r.name}</h3>
                        <p className="text-gray-400 text-lg mb-4">{r.cuisine}</p>
                        <div className="flex items-center justify-between border-t-2 border-gray-700 pt-4">
                          <div className="flex items-center gap-1"><Star /><span className="font-bold text-lg ml-1">{r.rating}</span></div>
                          <div className="flex items-center text-gray-400 gap-1"><Clock /><span>{r.deliveryTime}</span></div>
                          <div className="font-bold text-[#ff6b35] text-lg">${r.deliveryFee.toFixed(2)}</div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}

            {/* MENU */}
            {view === 'menu' && selectedRestaurant && (
              <div className="max-w-5xl mx-auto px-6 py-12 animate-slide-up">
                <button onClick={goHome} className="mb-6 text-gray-400 hover:text-white text-lg transition-colors">‚Üê Back to restaurants</button>
                <div className="flex items-center gap-4 mb-10">
                  <span className="text-6xl">{selectedRestaurant.image}</span>
                  <div>
                    <h2 className="title-font text-5xl">{selectedRestaurant.name}</h2>
                    <p className="text-gray-400 text-xl">{selectedRestaurant.cuisine} ¬∑ ‚≠ê {selectedRestaurant.rating} ¬∑ {selectedRestaurant.deliveryTime}</p>
                  </div>
                </div>
                {Object.entries(groupedMenu).map(([category, items]) => (
                  <div key={category} className="mb-10">
                    <h3 className="title-font text-3xl text-[#ff6b35] mb-4 border-b-2 border-gray-700 pb-2">{category}</h3>
                    <div className="space-y-4">
                      {items.map(item => {
                        const inCart = cart.find(c => c.id === item.id);
                        return (
                          <div key={item.id} className="bg-[#1a1a1a] border-2 border-white p-5 flex justify-between items-center">
                            <div>
                              <h4 className="text-xl font-bold">{item.name}</h4>
                              <p className="text-gray-400">{item.description}</p>
                              <p className="text-[#00d9ff] font-bold text-lg mt-1">${item.price.toFixed(2)}</p>
                            </div>
                            <div className="ml-4">
                              {inCart ? (
                                <div className="flex items-center bg-[#ff6b35] border-2 border-white">
                                  <button onClick={() => removeFromCart(item.id)} className="p-2 hover:bg-white hover:text-black transition-colors"><Minus /></button>
                                  <span className="px-4 font-bold text-lg">{inCart.quantity}</span>
                                  <button onClick={() => addToCart(item)} className="p-2 hover:bg-white hover:text-black transition-colors"><Plus /></button>
                                </div>
                              ) : (
                                <button onClick={() => addToCart(item)} className="btn-primary text-white px-5 py-2 font-bold text-lg flex items-center gap-2">
                                  <Plus /> ADD
                                </button>
                              )}
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                ))}
              </div>
            )}

            {/* CART */}
            {view === 'cart' && (
              <div className="max-w-4xl mx-auto px-6 py-12 animate-slide-up">
                <button onClick={() => setView(selectedRestaurant ? 'menu' : 'home')} className="mb-8 text-gray-400 hover:text-white text-lg transition-colors">‚Üê Continue shopping</button>
                <h2 className="title-font text-6xl mb-8">YOUR CART</h2>
                {cart.length === 0 ? (
                  <div className="text-center py-20 bg-[#1a1a1a] border-2 border-gray-700">
                    <div className="flex justify-center mb-6 text-gray-600"><ShoppingCart /></div>
                    <p className="text-3xl text-gray-500 mb-4">Your cart is empty</p>
                    <button onClick={goHome} className="btn-primary text-white px-8 py-4 font-bold text-xl">BROWSE RESTAURANTS</button>
                  </div>
                ) : (
                  <>
                    <div className="space-y-4 mb-8">
                      {cart.map(item => (
                        <div key={item.id} className="bg-[#1a1a1a] border-2 border-white p-6 flex justify-between items-center">
                          <div className="flex-1">
                            <h3 className="text-2xl font-bold mb-1">{item.name}</h3>
                            <p className="text-gray-400">${item.price.toFixed(2)} each</p>
                          </div>
                          <div className="flex items-center gap-6">
                            <div className="flex items-center bg-[#ff6b35] border-2 border-white">
                              <button onClick={() => removeFromCart(item.id)} className="p-2 hover:bg-white hover:text-black transition-colors"><Minus /></button>
                              <span className="px-6 text-xl font-bold">{item.quantity}</span>
                              <button onClick={() => addToCart(item)} className="p-2 hover:bg-white hover:text-black transition-colors"><Plus /></button>
                            </div>
                            <p className="text-2xl font-bold text-[#00d9ff] w-24 text-right">${(item.price * item.quantity).toFixed(2)}</p>
                            <button onClick={() => setCart(prev => prev.filter(c => c.id !== item.id))} className="text-gray-400 hover:text-red-500 transition-colors"><X /></button>
                          </div>
                        </div>
                      ))}
                    </div>
                    <div className="bg-[#1a1a1a] border-2 border-white p-8 accent-shadow">
                      <h3 className="title-font text-3xl mb-6">ORDER SUMMARY</h3>
                      <div className="space-y-3 text-xl mb-6">
                        <div className="flex justify-between"><span className="text-gray-400">Subtotal</span><span className="font-bold">${subtotal().toFixed(2)}</span></div>
                        <div className="flex justify-between"><span className="text-gray-400">Delivery Fee</span><span className="font-bold">${(selectedRestaurant?.deliveryFee || 0).toFixed(2)}</span></div>
                        <div className="border-t-2 border-gray-700 pt-3 flex justify-between text-2xl">
                          <span className="font-bold">Total</span><span className="font-bold text-[#ff6b35]">${total().toFixed(2)}</span>
                        </div>
                      </div>
                      <button onClick={() => setView('checkout')} className="w-full btn-primary text-white font-bold py-5 text-xl">PROCEED TO CHECKOUT</button>
                    </div>
                  </>
                )}
              </div>
            )}

            {/* CHECKOUT */}
            {view === 'checkout' && (
              <div className="max-w-2xl mx-auto px-6 py-12 animate-slide-up">
                <button onClick={() => setView('cart')} className="mb-8 text-gray-400 hover:text-white text-lg transition-colors">‚Üê Back to cart</button>
                <h2 className="title-font text-6xl mb-8">CHECKOUT</h2>
                <div className="bg-[#1a1a1a] border-2 border-white p-8 accent-shadow space-y-6">
                  <h3 className="title-font text-2xl text-[#ff6b35]">DELIVERY DETAILS</h3>
                  {[
                    { label: 'Full Name', value: customerName, set: setCustomerName, type: 'text', placeholder: 'Jane Smith' },
                    { label: 'Phone Number', value: customerPhone, set: setCustomerPhone, type: 'tel', placeholder: '+1 (555) 000-0000' },
                    { label: 'Delivery Address', value: deliveryAddress, set: setDeliveryAddress, type: 'text', placeholder: '123 Main St, City' },
                  ].map(({ label, value, set, type, placeholder }) => (
                    <div key={label}>
                      <label className="block text-gray-400 mb-2 font-bold">{label}</label>
                      <input type={type} value={value} onChange={e => set(e.target.value)} placeholder={placeholder}
                        className="w-full px-4 py-3 text-lg bg-[#0a0a0a] border-2 border-white text-white placeholder-gray-600 focus:outline-none focus:border-[#00d9ff]" />
                    </div>
                  ))}
                  <div className="border-t-2 border-gray-700 pt-4 space-y-2 text-lg">
                    <div className="flex justify-between"><span className="text-gray-400">Subtotal</span><span>${subtotal().toFixed(2)}</span></div>
                    <div className="flex justify-between"><span className="text-gray-400">Delivery</span><span>${(selectedRestaurant?.deliveryFee || 0).toFixed(2)}</span></div>
                    <div className="flex justify-between text-2xl font-bold pt-2 border-t border-gray-700">
                      <span>Total</span><span className="text-[#ff6b35]">${total().toFixed(2)}</span>
                    </div>
                  </div>
                  <button onClick={placeOrder} disabled={loading} className="w-full btn-primary text-white font-bold py-5 text-xl disabled:opacity-50">
                    {loading ? 'PLACING ORDER...' : 'PLACE ORDER'}
                  </button>
                </div>
              </div>
            )}

            {/* CONFIRMATION */}
            {view === 'confirmation' && orderDetails && (
              <div className="max-w-2xl mx-auto px-6 py-20 text-center animate-slide-up">
                <div className="flex justify-center mb-6"><CheckCircle /></div>
                <h2 className="title-font text-6xl mb-4">ORDER <span className="text-[#ff6b35]">CONFIRMED!</span></h2>
                <p className="text-gray-400 text-xl mb-2">Order #{orderDetails.id}</p>
                <p className="text-2xl mb-10">Your food is on its way üöÄ</p>
                <div className="bg-[#1a1a1a] border-2 border-white p-8 accent-shadow text-left mb-10 space-y-3">
                  <div className="flex justify-between text-lg"><span className="text-gray-400">Delivering to</span><span className="font-bold">{orderDetails.deliveryAddress}</span></div>
                  <div className="flex justify-between text-lg"><span className="text-gray-400">Total charged</span><span className="font-bold text-[#ff6b35]">${orderDetails.total?.toFixed(2)}</span></div>
                  <div className="flex justify-between text-lg"><span className="text-gray-400">Est. delivery</span><span className="font-bold">~30 min</span></div>
                </div>
                <button onClick={() => { setView('home'); setSelectedRestaurant(null); setMenuData(null); setRestaurants(allRestaurants); setSearchQuery(''); }}
                  className="btn-primary text-white px-10 py-5 font-bold text-xl">ORDER AGAIN</button>
              </div>
            )}
          </div>

          <footer className="bg-black border-t-4 border-white py-8 mt-20">
            <div className="max-w-7xl mx-auto px-6 text-center">
              <p className="text-gray-500 text-lg">¬© 2026 QUICKBITE. Fast food, faster delivery.</p>
            </div>
          </footer>
        </div>
      );
    }

    ReactDOM.render(<FoodDeliveryApp />, document.getElementById('root'));
  </script>
</body>
</html>
